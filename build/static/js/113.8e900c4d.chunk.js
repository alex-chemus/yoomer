"use strict";(self.webpackChunkyoomer=self.webpackChunkyoomer||[]).push([[113],{7113:function(e,r,s){s.r(r),s.d(r,{default:function(){return G}});var t=s(885),i=s(2791),n=s(6871),c=s(5340),a=s(6396),u=function(e){return{icon_img:e.icon_img,community_img:e.community_img,active_user_count:e.active_user_count,subscribers:e.subscribers,title:e.title,public_description:e.public_description,description_html:e.description_html,user_flair_richtext:e.user_flair_richtext,user_flair_background_color:e.user_flair_background_color,user_flair_text_color:e.user_flair_text_color,banner_background_image:e.banner_background_image,banner_background_color:e.banner_background_color,created:e.created,over18:e.over18,user_is_subscriber:e.user_is_subscriber}},l="Subreddit_loader__rKlqs",d="Subreddit_banner__Kgcye",o="Subreddit_header__Iagaq",_="Subreddit_headerInfo__vSa0z",b="Subreddit_subCreds__3eFi0",h="Subreddit_contentGrid__DncSN",m="Subreddit_mainContent__Ra8Es",x="Subreddit_sidebar__2TsNu",f="Subreddit_description__zL-bN",j="Subreddit_sortbar__QDevC",g="Subreddit_aboutSection__6zTYH",p="Subreddit_flair__J7zm-",v="Subreddit_rulesWrapper__uGgYi",S=s(2982),Z=s(3218),N="SubredditFeed_postWrapper__NuyiD",k=s(1),y=s(9598),R=s(2002),C=s(184),H=function(e){var r=e.subreddit,s=e.sort,n=(0,c.Z)(),u=(0,i.useState)([]),l=(0,t.Z)(u,2),d=l[0],o=l[1],_=(0,i.useRef)(""),b=(0,a.Z)({path:"/r/".concat(r,"/").concat(s),callback:function(e,r){var s=e.data;s.after!==_.current&&(_.current=s.after,o((function(e){var t=s.children.map((function(e){return(0,Z.Z)(e.data)}));return r?(0,S.Z)(t):[].concat((0,S.Z)(e),(0,S.Z)(t))})))},afterRef:_});return(0,i.useEffect)((function(){return b(!0)}),[n,s]),d.length?(0,C.jsxs)("section",{children:[d&&d.map((function(e,r){return(0,C.jsx)("div",{className:N,children:(0,C.jsx)(k.Z,{data:e},r)})})),d&&n&&(0,C.jsx)(y.Z,{onObserve:function(){return b(!1)},logMessage:"in subreddit feed"})]}):(0,C.jsx)(R.Z,{})},D=s(4534),E="Subscription_subBtn__fp9YV",F=function(e){var r=e.isSubbed,s=e.subreddit,n=(0,i.useState)(r),c=(0,t.Z)(n,2),u=c[0],l=c[1],d=(0,a.Z)({path:"/api/subscribe",callback:function(){return l((function(e){return!e}))},body:new URLSearchParams("action=".concat(u?"unsub":"sub","&sr_name=").concat(s))});return(0,C.jsx)("button",{onClick:d,className:E,children:u?"Unsubscribe":"Subscribe"})},I=s(3914),w="Rules_rules__9yQQS",z="Rules_listItem__vGx1s",M="Rules_accordion__lr7r7",T="Rules_panel__qI4WF",Y=function(e){var r=e.subreddit,s=(0,i.useState)(),n=(0,t.Z)(s,2),c=n[0],u=n[1];(0,i.useEffect)((0,a.Z)({path:"/r/".concat(r,"/about/rules"),callback:function(e){u(e.rules.map((function(e){return{short_name:e.short_name,description_html:e.description_html}})))}}),[]);return c?(0,C.jsx)("ul",{className:w,children:c.map((function(e,r){return(0,C.jsxs)("li",{className:z,children:[(0,C.jsx)("h5",{className:M,onClick:function(e){return function(e){var r=e.currentTarget.nextElementSibling;r.style.maxHeight?r.style.maxHeight="":r.style.maxHeight=r.scrollHeight+"px"}(e)},children:e.short_name}),(0,C.jsx)("div",{dangerouslySetInnerHTML:{__html:e.description_html},className:T})]},r)}))}):(0,C.jsx)(R.Z,{})},q=s(2013),G=function(){var e=(0,c.Z)(),r=(0,n.UO)().subreddit,s=(0,i.useState)(),S=(0,t.Z)(s,2),Z=S[0],N=S[1],k=(0,i.useState)("best"),y=(0,t.Z)(k,2),E=y[0],w=y[1],z=(0,a.Z)({path:"/r/".concat(r,"/about"),callback:function(e){N(u(e.data))}});(0,i.useEffect)(z,[e]);var M=function(){return!(null===Z||void 0===Z||!Z.user_flair_background_color)||!(null===Z||void 0===Z||!Z.user_flair_text_color)||0!==(null===Z||void 0===Z?void 0:Z.user_flair_richtext.length)};return Z?(0,C.jsxs)("main",{children:[(0,C.jsx)(q.Z,{}),(0,C.jsxs)("header",{className:o,children:[Z.banner_background_image&&(0,C.jsx)("img",{src:Z.banner_background_image,alt:"Banner",className:d}),(0,C.jsxs)("div",{"data-container":!0,className:_,"data-offset":Z.banner_background_image?"true":"false",children:[(0,C.jsxs)("div",{className:b,children:[Z.community_img||Z.icon_img?(0,C.jsx)("img",{src:Z.community_img||Z.icon_img,alt:""}):(0,C.jsx)("div",{"data-placeholder":!0}),(0,C.jsxs)("div",{children:[(0,C.jsx)("h2",{title:Z.title,children:Z.title}),(0,C.jsxs)("p",{children:["r/",r]})]})]}),(0,C.jsx)(F,{isSubbed:Z.user_is_subscriber,subreddit:r})]})]}),(0,C.jsxs)("section",{className:h,"data-container":!0,children:[(0,C.jsxs)("section",{className:m,children:[(0,C.jsx)("div",{className:j,children:(0,C.jsx)(D.Z,{changeSort:function(e){return w(e)},sort:E})}),(0,C.jsx)(H,{subreddit:r,sort:E})]}),(0,C.jsxs)("aside",{className:x,children:[(0,C.jsxs)("section",{className:g,children:[(0,C.jsx)("h3",{children:"About"}),(0,C.jsx)("p",{className:f,children:Z.public_description}),(0,C.jsxs)("p",{children:["Subscribers: ",(0,C.jsx)("b",{children:Z.subscribers})]}),(0,C.jsxs)("p",{children:["Active users: ",(0,C.jsx)("b",{children:Z.active_user_count})]}),(0,C.jsxs)("p",{children:["Created: ",(0,C.jsx)("b",{children:function(){var e=new Date(1e3*Z.created);return"".concat(e.getDate(),".").concat(e.getMonth()+1,".").concat(e.getFullYear())}()})]})]}),M()&&(0,C.jsx)("hr",{"data-separator":!0}),M()&&(0,C.jsxs)("div",{className:p,children:[(0,C.jsx)("p",{children:"My Flair:\xa0"}),(0,C.jsx)(I.Z,{bgcolor:Z.user_flair_background_color,richtext:Z.user_flair_richtext,color:Z.user_flair_text_color})]}),(0,C.jsx)("hr",{"data-separator":!0}),(0,C.jsxs)("div",{className:v,children:[(0,C.jsx)("h3",{children:"Rules"}),(0,C.jsx)(Y,{subreddit:r})]})]})]})]}):(0,C.jsxs)("div",{children:[(0,C.jsx)(q.Z,{}),(0,C.jsx)("div",{className:l,children:(0,C.jsx)(R.Z,{})})]})}}}]);
//# sourceMappingURL=113.8e900c4d.chunk.js.map