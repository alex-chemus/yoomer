"use strict";(self.webpackChunkyoomer=self.webpackChunkyoomer||[]).push([[657],{1657:function(e,t,r){r.r(t),r.d(t,{default:function(){return O}});var n=r(885),o=r(2791),a=r(6871),c=r(5340),i=r(6396),s=r(3218),l="PostView_post__FO+X3",u="PostView_topContainer__UbICx",d="PostView_titleContainer__Y-YAJ",m="PostView_textContainer__r3a62",h="PostView_vote__8fDVK",_=r(2982),x=r(6030),f={sortBar:"CommentsSection_sortBar__h97jw",active:"CommentsSection_active__fCTWy",panel:"CommentsSection_panel__aaz+r",btn:"CommentsSection_btn__AMnyy",comment:"CommentsSection_comment__0nT4R",commentField:"CommentsSection_commentField__v2Y4P"},b=function(e){return{author_flair_background_color:e.author_flair_background_color,author_flair_text_color:e.author_flair_text_color,author_flair_richtext:e.author_flair_richtext,body:e.body,name:e.name,parent_id:e.parent_id,replies:e.replies,author:e.author,body_html:e.body_html,likes:e.likes}},v="Comment_comment__ua3pG",j="Comment_title__h8uLi",p="Comment_replies__5A9an",g="Comment_reply__PKz4K",k="Comment_replyComment__hcHPX",y=r(3914),C="CommentField_field__OxJgZ",w=r(184),Z=function(e){var t=e.id,r=e.onSubmit,n=e.bgcolor,a=void 0===n?1:n,i=(0,c.Z)(),s=(0,x.v9)((function(e){return e.baseUrl})),l=(0,o.useRef)(null);return(0,w.jsxs)("div",{className:C,children:[(0,w.jsx)("textarea",{rows:3,placeholder:"write a comment",ref:l,"data-primary":1===a||void 0,"data-secondary":2===a||void 0}),(0,w.jsx)("button",{onClick:function(){i&&"error"!==i&&fetch("".concat(s,"/api/comment"),{method:"POST",headers:{Authorization:"Bearer ".concat(i)},body:new URLSearchParams("thing_id=".concat(t,"&text=").concat(l.current.value))}).then((function(e){return e.json()})).then((function(){l.current.value="",r()})).catch((function(e){return console.log(e)}))},"data-primary":1===a||void 0,"data-secondary":2===a||void 0,children:" Send "})]})},S=r(7383),N=function e(t){var r=t.data,a=t.onSubmit,c=t.bgcolor,i=void 0===c?"var(--bg-color-1)":c,s=(0,o.useRef)(b(r.data)),l=(0,o.useState)(!1),u=(0,n.Z)(l,2),d=u[0],m=u[1],h=(0,o.useState)(!1),_=(0,n.Z)(h,2),x=_[0],f=_[1],C=(0,o.useRef)(null);if((0,o.useEffect)((function(){C.current&&(C.current.innerHTML=s.current.body_html)}),[]),"t1"!==r.kind)return null;var N={backgroundColor:i};return(0,w.jsxs)("div",{className:v,style:N,children:[(0,w.jsxs)("div",{className:j,children:[(0,w.jsx)("h6",{children:s.current.author}),(0,w.jsx)(y.Z,{bgcolor:s.current.author_flair_background_color,color:s.current.author_flair_text_color,richtext:s.current.author_flair_richtext})]}),(0,w.jsx)("div",{ref:C,"data-mb":!0}),(0,w.jsx)("div",{"data-mb":!0,children:(0,w.jsx)(S.Z,{likes:s.current.likes,name:s.current.name,bgcolor:"var(--bg-color-1)"===i?"var(--bg-color-2)":"var(--bg-color-1)"})}),x?(0,w.jsx)(Z,{id:s.current.name,onSubmit:a,bgcolor:"var(--bg-color-1)"===i?2:1}):(0,w.jsx)("button",{onClick:function(){return f(!0)},className:g,"data-btn":"var(--bg-color-1)"===i?2:1,children:"  Reply "}),s.current.replies&&(0,w.jsxs)("button",{onClick:function(){return m(!d)},"data-btn":"var(--bg-color-1)"===i?2:1,children:[" ",d?"Hide":"Show","\xa0Replies "]}),d&&(0,w.jsx)("div",{className:p,children:s.current.replies.data.children.map((function(t){return(0,w.jsx)("div",{className:k,children:(0,w.jsx)(e,{data:t,onSubmit:a,bgcolor:"var(--bg-color-1)"===i?"var(--bg-color-2)":"var(--bg-color-1)"})})}))})]})},P=r(9598),T=r(2002),R=function(e){var t=e.link,r=(e.subreddit,(0,c.Z)()),a=(0,x.v9)((function(e){return e.baseUrl})),i=(0,o.useState)([]),s=(0,n.Z)(i,2),l=s[0],u=s[1],d=(0,o.useState)(),m=(0,n.Z)(d,2),h=m[0],b=m[1],v=(0,o.useRef)(0),j=(0,o.useRef)(null),p=(0,o.useState)("top"),g=(0,n.Z)(p,2),k=g[0],y=g[1],C=function(e){var t=[];e[1].data.children.forEach((function(e){"more"===e.kind?b(e):t.push(e)})),u((function(e){return[].concat((0,_.Z)(e),t)}))},S=function(){r&&"error"!==r&&(u([]),b(null),fetch("".concat(a,"/comments/").concat(t.slice(3),"?raw_json=1&sort=").concat(k),{method:"GET",headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){return e.json()})).then(C).catch((function(e){return console.log(e)})))};(0,o.useEffect)(S,[r,k]);var R=function(e){return{backgroundColor:e===k?"var(--accent-color)":"transparent",color:e===k?"var(--gray-0)":""}};return l?(0,w.jsxs)("section",{className:f.comments,children:[(0,w.jsx)("div",{className:f.commentField,children:(0,w.jsx)(Z,{id:t,onSubmit:S})}),(0,w.jsxs)("div",{className:f.sortBar,children:[(0,w.jsxs)("h6",{onClick:function(e){return function(e){window.matchMedia("(max-width: 576px)").matches&&(e.currentTarget.classList.toggle(f.active),j.current.style.maxHeight?j.current.style.maxHeight="":j.current.style.maxHeight=j.current.scrollHeight+"px")}(e)},children:["Sort by",(0,w.jsx)("span",{"data-mobile":!0,children:(0,w.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[(0,w.jsx)("line",{x1:"12",y1:"19",x2:"12",y2:"5",stroke:"currentColor"}),"'",(0,w.jsx)("polyline",{points:"5 12 12 5 19 12",stroke:"currentColor"})]})})]}),(0,w.jsxs)("div",{className:f.panel,ref:j,children:[(0,w.jsx)("button",{onClick:function(){return y("top")},style:R("top"),className:f.btn,children:"Top"}),(0,w.jsx)("button",{onClick:function(){return y("new")},style:R("new"),className:f.btn,children:"New"}),(0,w.jsx)("button",{onClick:function(){return y("old")},style:R("old"),className:f.btn,children:"Old"}),(0,w.jsx)("button",{onClick:function(){return y("controversial")},style:R("controversial"),className:f.btn,children:"Controversial"})]})]}),l.map((function(e){return(0,w.jsx)("div",{className:f.comment,children:(0,w.jsx)(N,{data:e,onSubmit:S})})})),h&&r&&(0,w.jsx)(P.Z,{onObserve:function(){if(r&&"error"!==r&&"number"===typeof v.current){var e="raw_json=1&comment=".concat(h.data.children[v.current],"&sort=").concat(k);v.current=v.current<h.data.children.length-1?v.current+1:null,fetch("".concat(a,"/comments/").concat(h.data.parent_id.slice(3),"?").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){return e.json()})).then(C).catch((function(e){return console.log(e)}))}},logMessage:"in comments section"})]}):(0,w.jsx)(T.Z,{})},H=r(727),B=r(3671),A=r(559),E=r(984),F=r(2013),O=function(){var e,t=(0,a.UO)().id,r=(0,c.Z)(),_=(0,o.useState)(),x=(0,n.Z)(_,2),f=x[0],b=x[1],v=(0,i.Z)({path:"/by_id/".concat(t),callback:function(e){var t=e.data.children[0].data;b((0,s.Z)(t))}});return(0,o.useEffect)(v,[r]),f?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(F.Z,{}),(0,w.jsxs)("main",{className:l,children:[(0,w.jsxs)("div",{className:u,children:[(0,w.jsx)(B.Z,{subreddit:f.subreddit,author:f.author,bgcolor:f.author_flair_background_color,color:f.author_flair_text_color,richtext:f.author_flair_richtext}),(0,w.jsx)(A.Z,{saved:f.saved,name:f.name})]}),(0,w.jsxs)("div",{className:d,children:[(0,w.jsx)("p",{children:f.title}),(0,w.jsx)(y.Z,{bgcolor:f.link_flair_background_color,color:f.link_flair_text_color,richtext:f.link_flair_richtext})]}),(null===(e=f.selftext_html)||void 0===e?void 0:e.length)&&(0,w.jsx)("div",{className:m,dangerouslySetInnerHTML:{__html:f.selftext_html}}),(0,w.jsx)(H.Z,{postType:f.post_hint,preview:f.preview,media:f.media,over18:f.over_18,spoiler:f.spoiler,url:f.url}),(0,w.jsxs)("div",{className:h,children:[(0,w.jsx)(S.Z,{likes:f.likes,name:f.name}),(0,w.jsx)(E.Z,{permalink:f.permalink})]}),(0,w.jsx)(R,{subreddit:f.subreddit,link:f.name})]})]}):(0,w.jsx)("main",{className:l,"data-center":!0,"data-container":!0,children:(0,w.jsx)(T.Z,{})})}}}]);
//# sourceMappingURL=657.c3baa7e2.chunk.js.map