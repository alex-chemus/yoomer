"use strict";(self.webpackChunkyoomer=self.webpackChunkyoomer||[]).push([[113],{113:function(e,n,t){t.r(n),t.d(n,{default:function(){return G}});var r=t(885),s=t(2791),c="FeedView_App__zgsy5",a="FeedView_content__QdOgv",i="FeedView_sortbar__n148y",u=t(2982),o=t(6030),l="CommonFeed_CommonFeed__P8jHF",d="CommonFeed_post__UuYoi",m=t(1663),f=t(4456),_=t(2711),h=t(184),x=function(e){var n=e.sort,t=(0,f.G)(),c=((0,o.v9)((function(e){return e.baseUrl})),(0,s.useState)([])),a=(0,r.Z)(c,2),i=a[0],x=a[1],j=(0,s.useRef)(""),v=(0,f.i)({path:"/".concat(n),callback:function(e,n){var t=e.data;t.after!==j.current&&(j.current=t.after,x((function(e){var r=t.children.map((function(e){return(0,_.UE)(e.data)}));return n?(0,u.Z)(r):[].concat((0,u.Z)(e),(0,u.Z)(r))})))},afterRef:j});return(0,s.useEffect)((function(){j.current=""}),[n]),(0,s.useEffect)((function(){return v(!0)}),[t,n]),i.length?(0,h.jsxs)("div",{className:l,children:[i&&i.map((function(e,n){return(0,h.jsx)("div",{className:d,children:(0,h.jsx)(_.SO,{data:e},n)})})),i&&t&&(0,h.jsx)(m.Qj,{onObserve:function(){return v(!1)},logMessage:"in common feed"})]}):(0,h.jsx)("div",{className:l,"data-center":!0,children:(0,h.jsx)(m.aN,{})})},j="SubredditsSidebar_SubredditsSidebar__1l-VI",v=function(e){return{name:e.display_name_prefixed,icon:e.icon_img||e.community_icon||null}},b=t(501),p="Communities_communities__GbQ1R",N="Communities_list__Kvtp6",g="Communities_heading__Uv4r6",S="Communities_subreddit__5SWWt",w="Communities_icon__ii6+c",C="Communities_btn__0wQTI",k=function(){var e=(0,f.G)(),n=(0,o.v9)((function(e){return e.baseUrl})),t=(0,s.useState)([]),c=(0,r.Z)(t,2),a=c[0],i=c[1],l=(0,s.useRef)(""),d=(0,s.useRef)(!1),m=function(e){var n=e.data;n.after!==l.current&&(null===n.after&&(d.current=!0),l.current=n.after,i((function(e){return[].concat((0,u.Z)(e),(0,u.Z)(n.children.filter((function(e){return e.data.display_name_prefixed.startsWith("r/")})).map((function(e){return v(e.data)}))))})))},_=function(){if(e&&"error"!==e&&!d.current){var t=l?"&after=".concat(l.current):"";fetch("".concat(n,"/subreddits/mine/subscriber?raw_json=1").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then(m).catch((function(e){return console.log(e)}))}};return(0,s.useEffect)(_,[e]),(0,h.jsxs)("div",{className:p,children:[(0,h.jsx)("h5",{className:g,children:"My Subreddits"}),(0,h.jsx)("ul",{className:N,children:a.map((function(e){return(0,h.jsxs)("li",{className:S,children:[e.icon?(0,h.jsx)("img",{src:e.icon,alt:"",width:25,height:25,className:w}):(0,h.jsx)("div",{className:w,"data-placeholder":!0}),(0,h.jsx)(b.rU,{to:e.name,children:e.name})]})}))}),!d.current&&(0,h.jsx)("button",{onClick:_,className:C,children:"load more"})]})},y="Search_container__3W0Yp",Z="Search_input__0NZSN",U="Search_btn__4nr4M",F="Search_list__vqisp",R=function(){var e=(0,s.useState)(""),n=(0,r.Z)(e,2),t=n[0],c=n[1],a=(0,s.useRef)(null),i=(0,s.useState)([]),u=(0,r.Z)(i,2),o=u[0],l=u[1],d=(0,f.i)({path:"/api/search_subreddits",callback:function(e){var n=e.subreddits.sort((function(e,n){return e.subscriber_count-n.subscriber_count}));l(n);document.addEventListener("click",(function(e){a.current.contains(e.target)||l([])}))},body:new URLSearchParams("exact=false&include_over_18=true&query=".concat(t))});return(0,h.jsxs)("div",{className:y,children:[(0,h.jsx)("input",{type:"text",value:t,onChange:function(e){return c(e.target.value)},placeholder:"search subreddits",className:Z}),(0,h.jsx)("button",{onClick:d,className:U,children:(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[(0,h.jsx)("circle",{cx:"11",cy:"11",r:"8",stroke:"currentColor",fill:"none"}),(0,h.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65",stroke:"currentColor"})]})}),!(null===o||void 0===o||!o.length)&&(0,h.jsx)("ul",{ref:a,className:F,children:o.map((function(e){return(0,h.jsx)("li",{children:(0,h.jsx)(b.rU,{to:"/r/".concat(e.name),children:e.name})})}))})]})},E=function(){return(0,h.jsxs)("aside",{className:j,children:[(0,h.jsx)(R,{}),(0,h.jsx)("hr",{}),(0,h.jsx)(k,{})]})},G=function(){var e=(0,s.useState)("best"),n=(0,r.Z)(e,2),t=n[0],u=n[1];return(0,h.jsxs)("main",{className:c,children:[(0,h.jsx)(m.JL,{}),(0,h.jsxs)("section",{"data-container":!0,className:a,children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:i,children:(0,h.jsx)(m.Mj,{changeSort:function(e){u(e)},sort:t})}),(0,h.jsx)(x,{sort:t})]}),(0,h.jsx)(E,{})]})]})}}}]);
//# sourceMappingURL=113.a99d132c.chunk.js.map