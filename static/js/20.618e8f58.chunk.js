"use strict";(self.webpackChunkyoomer=self.webpackChunkyoomer||[]).push([[20],{9020:function(e,r,t){t.r(r),t.d(r,{default:function(){return G}});var s=t(885),i=t(2791),n=t(6871),c=function(e){return{icon_img:e.icon_img,community_img:e.community_img,active_user_count:e.active_user_count,subscribers:e.subscribers,title:e.title,public_description:e.public_description,description_html:e.description_html,user_flair_richtext:e.user_flair_richtext,user_flair_background_color:e.user_flair_background_color,user_flair_text_color:e.user_flair_text_color,banner_background_image:e.banner_background_image,banner_background_color:e.banner_background_color,created:e.created,over18:e.over18,user_is_subscriber:e.user_is_subscriber}},a=t(4456),u=t(8683),o="ShowSubreddit_loader__+Z0Bw",l="ShowSubreddit_contentGrid__KwB2M",d="ShowSubreddit_mainContent__pw0gl",_="ShowSubreddit_sortbar__vncHy",b=t(2982),h="SubredditFeed_postWrapper__ItOAu",x=t(3347),f=t(2713),m=t(184),j=function(e){var r=e.sort,t=(0,i.useContext)(K).subreddit,n=(0,a.G)(),c=(0,i.useState)([]),u=(0,s.Z)(c,2),o=u[0],l=u[1],d=(0,i.useRef)(""),_=(0,a.i)({path:"/r/".concat(t,"/").concat(r),callback:function(e,r){var t=e.data;t.after!==d.current&&(d.current=t.after,l((function(e){var s=t.children.map((function(e){return(0,f.UE)(e.data)}));return r?(0,b.Z)(s):[].concat((0,b.Z)(e),(0,b.Z)(s))})))},afterRef:d});return(0,i.useEffect)((function(){return _(!0)}),[n,r]),o.length?(0,m.jsxs)("section",{children:[o&&o.map((function(e,r){return(0,m.jsx)("div",{className:h,children:(0,m.jsx)(f.SO,{data:e},r)})})),o&&n&&(0,m.jsx)(x.Qj,{onObserve:function(){return _(!1)},logMessage:"in subreddit feed"})]}):(0,m.jsx)(x.aN,{})},p="SubredditHeader_banner__ze+Sd",g="SubredditHeader_header__QLivL",v="SubredditHeader_headerInfo__RUFSQ",S="SubredditHeader_subCreds__KoyiN",N="Subscription_subBtn__7pDvx",k=function(e){var r=e.isSubbed,t=e.subreddit,n=(0,i.useState)(r),c=(0,s.Z)(n,2),u=c[0],o=c[1],l=(0,a.i)({path:"/api/subscribe",callback:function(){return o((function(e){return!e}))},body:new URLSearchParams("action=".concat(u?"unsub":"sub","&sr_name=").concat(t))});return(0,m.jsx)("button",{onClick:l,className:N,children:u?"Unsubscribe":"Subscribe"})},w=function(e){var r=e.banner,t=e.icon,s=e.title,n=e.subscribed,c=(0,i.useContext)(K).subreddit;return(0,m.jsxs)("header",{className:g,children:[r&&(0,m.jsx)("img",{src:r,alt:"Banner",className:p}),(0,m.jsxs)("div",{"data-container":!0,className:v,"data-offset":r?"true":"false",children:[(0,m.jsxs)("div",{className:S,children:[t?(0,m.jsx)("img",{src:t,alt:""}):(0,m.jsx)("div",{"data-placeholder":!0}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{title:s,children:s}),(0,m.jsxs)("p",{children:["r/",c]})]})]}),(0,m.jsx)(k,{isSubbed:n,subreddit:c})]})]})},y="SubredditAside_sidebar__s9x8H",C="SubredditAside_aboutSection__m8Fcf",Z="SubredditAside_description__kK0uK",H="SubredditAside_flair__8ElVV",R="SubredditAside_rulesWrapper__GFaEc",A="ShowRules_rules__NiEA1",E="ShowRules_listItem__lfiVB",F="ShowRules_accordion__EZKUN",L="ShowRules_panel__YYA3n",M=function(e){var r=e.rules,t=e.toggleRule;return r?(0,m.jsx)("ul",{className:A,children:r.map((function(e,r){return(0,m.jsxs)("li",{className:E,children:[(0,m.jsx)("h5",{className:F,onClick:function(e){return t(e)},children:e.short_name}),(0,m.jsx)("div",{dangerouslySetInnerHTML:{__html:e.description_html},className:L})]},r)}))}):(0,m.jsx)(x.aN,{})},U=function(e){var r=e.subreddit,t=(0,i.useState)(null),n=(0,s.Z)(t,2),c=n[0],u=n[1];(0,i.useEffect)((0,a.i)({path:"/r/".concat(r,"/about/rules"),callback:function(e){u(e.rules.map((function(e){return{short_name:e.short_name,description_html:e.description_html}})))}}),[]);return(0,m.jsx)(M,{toggleRule:function(e){var r=e.currentTarget.nextElementSibling;r.style.maxHeight?r.style.maxHeight="":r.style.maxHeight=r.scrollHeight+"px"},rules:c})},B=function(e){var r=e.flair,t=e.description,s=e.subscribers,n=e.activeCount,c=(0,i.useContext)(K),a=c.subreddit,u=c.getDate,o=c.hasFlair;return(0,m.jsxs)("aside",{className:y,children:[(0,m.jsxs)("section",{className:C,children:[(0,m.jsx)("h3",{children:"About"}),(0,m.jsxs)("p",{className:Z,children:[" ",t," "]}),(0,m.jsxs)("p",{children:["Subscribers: ",(0,m.jsx)("b",{children:s})]}),(0,m.jsxs)("p",{children:["Active users: ",(0,m.jsx)("b",{children:n})]}),(0,m.jsxs)("p",{children:["Created: ",(0,m.jsx)("b",{children:u()})]})]}),o()&&(0,m.jsx)("hr",{"data-separator":!0}),o()&&(0,m.jsxs)("div",{className:H,children:[(0,m.jsx)("p",{children:"My Flair:\xa0"}),(0,m.jsx)(x.aQ,{bgcolor:r.bgcolor,richtext:r.richtext,color:r.color})]}),(0,m.jsx)("hr",{"data-separator":!0}),(0,m.jsxs)("div",{className:R,children:[(0,m.jsx)("h3",{children:"Rules"}),(0,m.jsx)(U,{subreddit:a})]})]})},D=function(e){var r=e.data,t=(0,i.useState)("best"),n=(0,s.Z)(t,2),c=n[0],a=n[1],b={banner:r.banner_background_image,icon:r.community_img||r.icon_img,title:r.title,subscribed:r.user_is_subscriber},h={flair:{bgcolor:r.user_flair_background_color,color:r.user_flair_text_color,richtext:r.user_flair_richtext},description:r.public_description,subscribers:r.subscribers,activeCount:r.active_user_count};return r?(0,m.jsxs)("main",{children:[(0,m.jsx)(x.JL,{}),(0,m.jsx)(w,(0,u.Z)({},b)),(0,m.jsxs)("section",{className:l,"data-container":!0,children:[(0,m.jsxs)("section",{className:d,children:[(0,m.jsx)("div",{className:_,children:(0,m.jsx)(x.Mj,{changeSort:function(e){return a(e)},sort:c})}),(0,m.jsx)(j,{sort:c})]}),(0,m.jsx)(B,(0,u.Z)({},h))]})]}):(0,m.jsxs)("div",{children:[(0,m.jsx)(x.JL,{}),(0,m.jsx)("div",{className:o,children:(0,m.jsx)(x.aN,{})})]})},K=(0,i.createContext)(null),G=function(){var e=(0,a.G)(),r=(0,n.UO)().subreddit,t=(0,n.s0)();"undefined"===typeof r&&t("/",{replace:!0});var u=(0,i.useState)(),o=(0,s.Z)(u,2),l=o[0],d=o[1],_=(0,a.i)({path:"/r/".concat(r,"/about"),callback:function(e){d(c(e.data))}});(0,i.useEffect)(_,[e]);return(0,m.jsx)(K.Provider,{value:{subreddit:r,getDate:function(){var e=new Date(1e3*l.created);return"".concat(e.getDate(),".").concat(e.getMonth()+1,".").concat(e.getFullYear())},hasFlair:function(){return!(null===l||void 0===l||!l.user_flair_background_color)||!(null===l||void 0===l||!l.user_flair_text_color)||0!==(null===l||void 0===l?void 0:l.user_flair_richtext.length)}},children:(0,m.jsx)(D,{data:l})})}}}]);
//# sourceMappingURL=20.618e8f58.chunk.js.map