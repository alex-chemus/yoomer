"use strict";(self.webpackChunkyoomer=self.webpackChunkyoomer||[]).push([[258],{2258:function(e,n,t){t.r(n),t.d(n,{default:function(){return Q}});var r=t(885),s=t(2791),a="FeedView_App__zgsy5",c="FeedView_content__QdOgv",i="FeedView_sortbar__n148y",u=t(2982),o="CommonFeed_CommonFeed__P8jHF",l="CommonFeed_post__UuYoi",d=t(696),h=t(4456),m=t(2675),f=t(184),_=function(e){var n=e.sort,t=(0,h.G)(),a=(0,s.useState)([]),c=(0,r.Z)(a,2),i=c[0],_=c[1],x=(0,s.useRef)(""),j=(0,h.i)({path:"/".concat(n),callback:function(e,n){var t=e.data;t.after!==x.current&&(x.current=t.after,_((function(e){var r=t.children.map((function(e){return(0,m.UE)(e.data)}));return n?(0,u.Z)(r):[].concat((0,u.Z)(e),(0,u.Z)(r))})))},afterRef:x});return(0,s.useEffect)((function(){x.current=""}),[n]),(0,s.useEffect)((function(){return j(!0)}),[t,n]),i.length?(0,f.jsxs)("div",{className:o,children:[i&&i.map((function(e,n){return(0,f.jsx)("div",{className:l,children:(0,f.jsx)(m.SO,{data:e})},n)})),i&&t&&(0,f.jsx)(d.Qj,{onObserve:function(){return j(!1)}})]}):(0,f.jsx)("div",{className:o,"data-center":!0,children:(0,f.jsx)(d.aN,{})})},x="SubredditsSidebar_SubredditsSidebar__1l-VI",j=t(8683),p=t(6030),b=function(e){return{name:e.display_name_prefixed,icon:e.icon_img||e.community_icon||null}},S="ShowCommunities_communities__Qy+c5",v="ShowCommunities_list__RrZon",w="ShowCommunities_heading__4y0Ky",N="ShowCommunities_subreddit__GJz1H",g="ShowCommunities_icon__5SO-x",y="ShowCommunities_btn__-Pls0",C=t(501),k=function(e){var n=e.fetchSubs,t=e.isAll,r=e.subreddits;return(0,f.jsxs)("div",{className:S,children:[(0,f.jsx)("h5",{className:w,children:"My Subreddits"}),(0,f.jsx)("ul",{className:v,children:r.map((function(e,n){return(0,f.jsxs)("li",{className:N,children:[e.icon?(0,f.jsx)("img",{src:e.icon,alt:"",width:25,height:25,className:g}):(0,f.jsx)("div",{className:g,"data-placeholder":!0}),(0,f.jsx)(C.rU,{to:e.name,title:e.name,children:e.name})]},n)}))}),!t&&(0,f.jsx)("button",{onClick:n,className:y,children:"load more"})]})},Z=function(){var e=(0,h.G)(),n=(0,p.v9)((function(e){return e.baseUrl})),t=(0,s.useRef)(""),a=(0,s.useState)([]),c=(0,r.Z)(a,2),i=c[0],o=c[1],l=(0,s.useState)(!1),d=(0,r.Z)(l,2),m=d[0],_=d[1],x=function(e){var n=e.data;n.after!==t.current&&(null===n.after&&_(!0),t.current=n.after,o((function(e){return[].concat((0,u.Z)(e),(0,u.Z)(n.children.filter((function(e){return e.data.display_name_prefixed.startsWith("r/")})).map((function(e){return b(e.data)}))))})))},S=function(){if(e&&"error"!==e&&null!==t.current){var r=t?"&after=".concat(t.current):"";fetch("".concat(n,"/subreddits/mine/subscriber?raw_json=1").concat(r),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then(x).catch((function(e){return console.log(e)}))}};(0,s.useEffect)(S,[e]);var v={fetchSubs:S,isAll:m,subreddits:i};return(0,f.jsx)(k,(0,j.Z)({},v))},F="ShowSearch_container__Y32e+",R="ShowSearch_input__xfNqu",U="ShowSearch_btn__lc0Ra",E="ShowSearch_list__JZQ4-",A="ShowSearch_backdrop__WD0pt",G=function(e){var n=e.popupData,t=e.searchSubs,r=e.clear,s=e.input,a=e.setInput;return(0,f.jsxs)("div",{className:F,children:[(0,f.jsx)("input",{type:"text",value:s,onChange:function(e){return a(e.target.value)},placeholder:"search subreddits",className:R}),(0,f.jsx)("button",{onClick:function(){return t(s)},className:U,children:(0,f.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,f.jsx)("circle",{cx:"11",cy:"11",r:"8",stroke:"currentColor",fill:"none"}),(0,f.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65",stroke:"currentColor"})]})}),!(null===n||void 0===n||!n.length)&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:A,onClick:r}),(0,f.jsx)("ul",{className:E,children:n.map((function(e,n){return(0,f.jsx)("li",{children:(0,f.jsxs)(C.rU,{to:"/r/".concat(e.name),children:["/r/",e.name]})},n)}))})]})]})},L=function(){var e=(0,s.useState)(""),n=(0,r.Z)(e,2),t=n[0],a=n[1],c=(0,s.useState)([]),i=(0,r.Z)(c,2),u=i[0],o=i[1],l={searchSubs:(0,h.i)({path:"/api/search_subreddits",callback:function(e){var n=e.subreddits.sort((function(e,n){return e.subscriber_count-n.subscriber_count}));o(n)},body:new URLSearchParams("exact=false&include_over_18=true&query=".concat(t))}),popupData:u,input:t,setInput:a,clear:function(){return o([])}};return(0,f.jsx)(G,(0,j.Z)({},l))},O=function(){return(0,f.jsxs)("aside",{className:x,children:[(0,f.jsx)(L,{}),(0,f.jsx)("hr",{}),(0,f.jsx)(Z,{})]})},Q=function(){var e=(0,s.useState)("best"),n=(0,r.Z)(e,2),t=n[0],u=n[1];return(0,f.jsxs)("main",{className:a,children:[(0,f.jsx)(d.JL,{}),(0,f.jsxs)("section",{"data-container":!0,className:c,children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:i,children:(0,f.jsx)(d.Mj,{changeSort:function(e){u(e)},sort:t})}),(0,f.jsx)(_,{sort:t})]}),(0,f.jsx)(O,{})]})]})}}}]);
//# sourceMappingURL=258.ccf85d7f.chunk.js.map