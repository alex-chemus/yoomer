"use strict";(self.webpackChunkyoomer=self.webpackChunkyoomer||[]).push([[728],{1728:function(e,r,s){s.r(r),s.d(r,{default:function(){return H}});var t=s(885),i=s(2791),n=s(6871),a=function(e){return{icon_img:e.icon_img,community_img:e.community_img,active_user_count:e.active_user_count,subscribers:e.subscribers,title:e.title,public_description:e.public_description,description_html:e.description_html,user_flair_richtext:e.user_flair_richtext,user_flair_background_color:e.user_flair_background_color,user_flair_text_color:e.user_flair_text_color,banner_background_image:e.banner_background_image,banner_background_color:e.banner_background_color,created:e.created,over18:e.over18,user_is_subscriber:e.user_is_subscriber}},c="Subreddit_loader__snghz",u="Subreddit_banner__MNtC3",l="Subreddit_header__UUoil",d="Subreddit_headerInfo__O-lpS",o="Subreddit_subCreds__-Zv8d",_="Subreddit_contentGrid__iqgBW",b="Subreddit_mainContent__g8NZ7",h="Subreddit_sidebar__Kl7g5",m="Subreddit_description__i9aUv",x="Subreddit_sortbar__gmzIN",f="Subreddit_aboutSection__kZNW5",j="Subreddit_flair__NwnAl",g="Subreddit_rulesWrapper__IDlSN",p=s(2982),v="SubredditFeed_postWrapper__ItOAu",S=s(1663),N=s(4456),k=s(2711),y=s(184),Z=function(e){var r=e.subreddit,s=e.sort,n=(0,N.G)(),a=(0,i.useState)([]),c=(0,t.Z)(a,2),u=c[0],l=c[1],d=(0,i.useRef)(""),o=(0,N.i)({path:"/r/".concat(r,"/").concat(s),callback:function(e,r){var s=e.data;s.after!==d.current&&(d.current=s.after,l((function(e){var t=s.children.map((function(e){return(0,k.UE)(e.data)}));return r?(0,p.Z)(t):[].concat((0,p.Z)(e),(0,p.Z)(t))})))},afterRef:d});return(0,i.useEffect)((function(){return o(!0)}),[n,s]),u.length?(0,y.jsxs)("section",{children:[u&&u.map((function(e,r){return(0,y.jsx)("div",{className:v,children:(0,y.jsx)(k.SO,{data:e},r)})})),u&&n&&(0,y.jsx)(S.Qj,{onObserve:function(){return o(!1)},logMessage:"in subreddit feed"})]}):(0,y.jsx)(S.aN,{})},R="Subscription_subBtn__7pDvx",C=function(e){var r=e.isSubbed,s=e.subreddit,n=(0,i.useState)(r),a=(0,t.Z)(n,2),c=a[0],u=a[1],l=(0,N.i)({path:"/api/subscribe",callback:function(){return u((function(e){return!e}))},body:new URLSearchParams("action=".concat(c?"unsub":"sub","&sr_name=").concat(s))});return(0,y.jsx)("button",{onClick:l,className:R,children:c?"Unsubscribe":"Subscribe"})},U="Rules_rules__b7TRP",w="Rules_listItem__eEu8d",E="Rules_accordion__syy0j",I="Rules_panel__wF5YR",M=function(e){var r=e.subreddit,s=(0,i.useState)(),n=(0,t.Z)(s,2),a=n[0],c=n[1];(0,i.useEffect)((0,N.i)({path:"/r/".concat(r,"/about/rules"),callback:function(e){c(e.rules.map((function(e){return{short_name:e.short_name,description_html:e.description_html}})))}}),[]);return a?(0,y.jsx)("ul",{className:U,children:a.map((function(e,r){return(0,y.jsxs)("li",{className:w,children:[(0,y.jsx)("h5",{className:E,onClick:function(e){return function(e){var r=e.currentTarget.nextElementSibling;r.style.maxHeight?r.style.maxHeight="":r.style.maxHeight=r.scrollHeight+"px"}(e)},children:e.short_name}),(0,y.jsx)("div",{dangerouslySetInnerHTML:{__html:e.description_html},className:I})]},r)}))}):(0,y.jsx)(S.aN,{})},H=function(){var e=(0,N.G)(),r=(0,n.UO)().subreddit,s=(0,i.useState)(),p=(0,t.Z)(s,2),v=p[0],k=p[1],R=(0,i.useState)("best"),U=(0,t.Z)(R,2),w=U[0],E=U[1],I=(0,N.i)({path:"/r/".concat(r,"/about"),callback:function(e){k(a(e.data))}});(0,i.useEffect)(I,[e]);var H=function(){return!(null===v||void 0===v||!v.user_flair_background_color)||!(null===v||void 0===v||!v.user_flair_text_color)||0!==(null===v||void 0===v?void 0:v.user_flair_richtext.length)};return v?(0,y.jsxs)("main",{children:[(0,y.jsx)(S.JL,{}),(0,y.jsxs)("header",{className:l,children:[v.banner_background_image&&(0,y.jsx)("img",{src:v.banner_background_image,alt:"Banner",className:u}),(0,y.jsxs)("div",{"data-container":!0,className:d,"data-offset":v.banner_background_image?"true":"false",children:[(0,y.jsxs)("div",{className:o,children:[v.community_img||v.icon_img?(0,y.jsx)("img",{src:v.community_img||v.icon_img,alt:""}):(0,y.jsx)("div",{"data-placeholder":!0}),(0,y.jsxs)("div",{children:[(0,y.jsx)("h2",{title:v.title,children:v.title}),(0,y.jsxs)("p",{children:["r/",r]})]})]}),(0,y.jsx)(C,{isSubbed:v.user_is_subscriber,subreddit:r})]})]}),(0,y.jsxs)("section",{className:_,"data-container":!0,children:[(0,y.jsxs)("section",{className:b,children:[(0,y.jsx)("div",{className:x,children:(0,y.jsx)(S.Mj,{changeSort:function(e){return E(e)},sort:w})}),(0,y.jsx)(Z,{subreddit:r,sort:w})]}),(0,y.jsxs)("aside",{className:h,children:[(0,y.jsxs)("section",{className:f,children:[(0,y.jsx)("h3",{children:"About"}),(0,y.jsx)("p",{className:m,children:v.public_description}),(0,y.jsxs)("p",{children:["Subscribers: ",(0,y.jsx)("b",{children:v.subscribers})]}),(0,y.jsxs)("p",{children:["Active users: ",(0,y.jsx)("b",{children:v.active_user_count})]}),(0,y.jsxs)("p",{children:["Created: ",(0,y.jsx)("b",{children:function(){var e=new Date(1e3*v.created);return"".concat(e.getDate(),".").concat(e.getMonth()+1,".").concat(e.getFullYear())}()})]})]}),H()&&(0,y.jsx)("hr",{"data-separator":!0}),H()&&(0,y.jsxs)("div",{className:j,children:[(0,y.jsx)("p",{children:"My Flair:\xa0"}),(0,y.jsx)(S.aQ,{bgcolor:v.user_flair_background_color,richtext:v.user_flair_richtext,color:v.user_flair_text_color})]}),(0,y.jsx)("hr",{"data-separator":!0}),(0,y.jsxs)("div",{className:g,children:[(0,y.jsx)("h3",{children:"Rules"}),(0,y.jsx)(M,{subreddit:r})]})]})]})]}):(0,y.jsxs)("div",{children:[(0,y.jsx)(S.JL,{}),(0,y.jsx)("div",{className:c,children:(0,y.jsx)(S.aN,{})})]})}}}]);
//# sourceMappingURL=728.ab84005d.chunk.js.map