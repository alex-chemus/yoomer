"use strict";(self.webpackChunkyoomer=self.webpackChunkyoomer||[]).push([[168],{6168:function(e,n,t){t.r(n),t.d(n,{default:function(){return V}});var r=t(885),s=t(2791),a="FeedView_App__zgsy5",c="FeedView_content__QdOgv",i="FeedView_sortbar__n148y",o=t(2982),u=t(6030),l="CommonFeed_CommonFeed__P8jHF",d="CommonFeed_post__UuYoi",h=t(3347),m=t(4456),f=t(2711),_=t(184),x=function(e){var n=e.sort,t=(0,m.G)(),a=((0,u.v9)((function(e){return e.baseUrl})),(0,s.useState)([])),c=(0,r.Z)(a,2),i=c[0],x=c[1],j=(0,s.useRef)(""),b=(0,m.i)({path:"/".concat(n),callback:function(e,n){var t=e.data;t.after!==j.current&&(j.current=t.after,x((function(e){var r=t.children.map((function(e){return(0,f.UE)(e.data)}));return n?(0,o.Z)(r):[].concat((0,o.Z)(e),(0,o.Z)(r))})))},afterRef:j});return(0,s.useEffect)((function(){j.current=""}),[n]),(0,s.useEffect)((function(){return b(!0)}),[t,n]),i.length?(0,_.jsxs)("div",{className:l,children:[i&&i.map((function(e,n){return(0,_.jsx)("div",{className:d,children:(0,_.jsx)(f.SO,{data:e},n)})})),i&&t&&(0,_.jsx)(h.Qj,{onObserve:function(){return b(!1)},logMessage:"in common feed"})]}):(0,_.jsx)("div",{className:l,"data-center":!0,children:(0,_.jsx)(h.aN,{})})},j="SubredditsSidebar_SubredditsSidebar__1l-VI",b=t(8683),p=function(e){return{name:e.display_name_prefixed,icon:e.icon_img||e.community_icon||null}},S="ShowCommunities_communities__Qy+c5",v="ShowCommunities_list__RrZon",w="ShowCommunities_heading__4y0Ky",N="ShowCommunities_subreddit__GJz1H",g="ShowCommunities_icon__5SO-x",y="ShowCommunities_btn__-Pls0",C=t(501),k=function(e){var n=e.fetchSubs,t=e.isAll,r=e.subreddits;return(0,_.jsxs)("div",{className:S,children:[(0,_.jsx)("h5",{className:w,children:"My Subreddits"}),(0,_.jsx)("ul",{className:v,children:r.map((function(e){return(0,_.jsxs)("li",{className:N,children:[e.icon?(0,_.jsx)("img",{src:e.icon,alt:"",width:25,height:25,className:g}):(0,_.jsx)("div",{className:g,"data-placeholder":!0}),(0,_.jsx)(C.rU,{to:e.name,title:e.name,children:e.name})]})}))}),!t&&(0,_.jsx)("button",{onClick:n,className:y,children:"load more"})]})},Z=function(){var e=(0,m.G)(),n=(0,u.v9)((function(e){return e.baseUrl})),t=(0,s.useRef)(""),a=(0,s.useState)([]),c=(0,r.Z)(a,2),i=c[0],l=c[1],d=(0,s.useState)(!1),h=(0,r.Z)(d,2),f=h[0],x=h[1],j=function(e){var n=e.data;n.after!==t.current&&(null===n.after&&x(!0),t.current=n.after,l((function(e){return[].concat((0,o.Z)(e),(0,o.Z)(n.children.filter((function(e){return e.data.display_name_prefixed.startsWith("r/")})).map((function(e){return p(e.data)}))))})))},S=function(){if(e&&"error"!==e&&null!==t.current){var r=t?"&after=".concat(t.current):"";fetch("".concat(n,"/subreddits/mine/subscriber?raw_json=1").concat(r),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then(j).catch((function(e){return console.log(e)}))}};(0,s.useEffect)(S,[e]);var v={fetchSubs:S,isAll:f,subreddits:i};return(0,_.jsx)(k,(0,b.Z)({},v))},F="ShowSearch_container__Y32e+",U="ShowSearch_input__xfNqu",R="ShowSearch_btn__lc0Ra",E="ShowSearch_list__JZQ4-",A="ShowSearch_backdrop__WD0pt",G=function(e){var n=e.popupData,t=e.searchSubs,r=e.clear,s=e.input,a=e.setInput;return(0,_.jsxs)("div",{className:F,children:[(0,_.jsx)("input",{type:"text",value:s,onChange:function(e){return a(e.target.value)},placeholder:"search subreddits",className:U}),(0,_.jsx)("button",{onClick:function(){return t(s)},className:R,children:(0,_.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[(0,_.jsx)("circle",{cx:"11",cy:"11",r:"8",stroke:"currentColor",fill:"none"}),(0,_.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65",stroke:"currentColor"})]})}),!(null===n||void 0===n||!n.length)&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:A,onClick:r}),(0,_.jsx)("ul",{className:E,children:n.map((function(e){return(0,_.jsx)("li",{children:(0,_.jsxs)(C.rU,{to:"/r/".concat(e.name),children:["/r/",e.name]})})}))})]})]})},O=function(){var e=(0,s.useState)(""),n=(0,r.Z)(e,2),t=n[0],a=n[1],c=(0,s.useState)([]),i=(0,r.Z)(c,2),o=i[0],u=i[1],l={searchSubs:(0,m.i)({path:"/api/search_subreddits",callback:function(e){var n=e.subreddits.sort((function(e,n){return e.subscriber_count-n.subscriber_count}));u(n)},body:new URLSearchParams("exact=false&include_over_18=true&query=".concat(t))}),popupData:o,input:t,setInput:a,clear:function(){return u([])}};return(0,_.jsx)(G,(0,b.Z)({},l))},Q=function(){return(0,_.jsxs)("aside",{className:j,children:[(0,_.jsx)(O,{}),(0,_.jsx)("hr",{}),(0,_.jsx)(Z,{})]})},V=function(){var e=(0,s.useState)("best"),n=(0,r.Z)(e,2),t=n[0],o=n[1];return(0,_.jsxs)("main",{className:a,children:[(0,_.jsx)(h.JL,{}),(0,_.jsxs)("section",{"data-container":!0,className:c,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{className:i,children:(0,_.jsx)(h.Mj,{changeSort:function(e){o(e)},sort:t})}),(0,_.jsx)(x,{sort:t})]}),(0,_.jsx)(Q,{})]})]})}}}]);
//# sourceMappingURL=168.2881b207.chunk.js.map