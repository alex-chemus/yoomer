"use strict";(self.webpackChunkyoomer=self.webpackChunkyoomer||[]).push([[135],{6135:function(e,r,s){s.r(r),s.d(r,{default:function(){return G}});var t=s(885),i=s(2791),n=s(6871),a=function(e){return{icon_img:e.icon_img,community_img:e.community_img,active_user_count:e.active_user_count,subscribers:e.subscribers,title:e.title,public_description:e.public_description,description_html:e.description_html,user_flair_richtext:e.user_flair_richtext,user_flair_background_color:e.user_flair_background_color,user_flair_text_color:e.user_flair_text_color,banner_background_image:e.banner_background_image,banner_background_color:e.banner_background_color,created:e.created,over18:e.over18,user_is_subscriber:e.user_is_subscriber}},c=s(4456),u="ShowSubreddit_loader__+Z0Bw",l="ShowSubreddit_contentGrid__KwB2M",o="ShowSubreddit_mainContent__pw0gl",d="ShowSubreddit_sortbar__vncHy",_=s(2982),b="SubredditFeed_postWrapper__ItOAu",h="SubredditFeed_loaderWrapper__VgV45",x=s(696),f=s(2675),m=s(184),j=function(e){var r=e.sort,s=(0,i.useContext)(V).subreddit,n=void 0===s?"":s,a=(0,c.G)(),u=(0,i.useState)([]),l=(0,t.Z)(u,2),o=l[0],d=l[1],j=(0,i.useRef)(""),p=(0,c.i)({path:"/r/".concat(n,"/").concat(r),callback:function(e,r){var s=e.data;s.after!==j.current&&(j.current=s.after,d((function(e){var t=s.children.map((function(e){return(0,f.UE)(e.data)}));return r?(0,_.Z)(t):[].concat((0,_.Z)(e),(0,_.Z)(t))})))},afterRef:j});return(0,i.useEffect)((function(){return p(!0)}),[a,r]),o.length?(0,m.jsxs)("section",{children:[o&&o.map((function(e,r){return(0,m.jsx)("div",{className:b,children:(0,m.jsx)(f.SO,{data:e})},r)})),o&&a&&(0,m.jsx)(x.Qj,{onObserve:function(){return p(!1)}})]}):(0,m.jsx)("div",{className:h,children:(0,m.jsx)(x.aN,{})})},p="SubredditHeader_banner__ze+Sd",v="SubredditHeader_header__QLivL",g="SubredditHeader_headerInfo__RUFSQ",S="SubredditHeader_subCreds__KoyiN",N="Subscription_subBtn__7pDvx",k=function(e){var r=e.isSubbed,s=e.subreddit,n=(0,i.useState)(r),a=(0,t.Z)(n,2),u=a[0],l=a[1],o=(0,c.i)({path:"/api/subscribe",callback:function(){return l((function(e){return!e}))},body:new URLSearchParams("action=".concat(u?"unsub":"sub","&sr_name=").concat(s))});return(0,m.jsx)("button",{onClick:o,className:N,children:u?"Unsubscribe":"Subscribe"})},w=function(e){var r=e.banner,s=e.icon,t=e.title,n=e.subscribed,a=(0,i.useContext)(V).subreddit;return(0,m.jsxs)("header",{className:v,children:[r&&(0,m.jsx)("img",{src:r,alt:"Banner",className:p}),(0,m.jsxs)("div",{"data-container":!0,className:g,"data-offset":r?"true":"false",children:[(0,m.jsxs)("div",{className:S,children:[s?(0,m.jsx)("img",{src:s,alt:""}):(0,m.jsx)("div",{"data-placeholder":!0}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{title:t,children:t}),(0,m.jsxs)("p",{children:["r/",a]})]})]}),(0,m.jsx)(k,{isSubbed:n,subreddit:a})]})]})},y="SubredditAside_sidebar__s9x8H",C="SubredditAside_aboutSection__m8Fcf",R="SubredditAside_description__kK0uK",H="SubredditAside_flair__8ElVV",A="SubredditAside_rulesWrapper__GFaEc",Z="ShowRules_rules__NiEA1",E="ShowRules_listItem__lfiVB",F="ShowRules_accordion__EZKUN",L="ShowRules_panel__YYA3n",U="ShowRules_loaderWrapper__mCxUL",B=function(e){var r=e.rules,s=e.toggleRule;return r?(0,m.jsx)("ul",{className:Z,children:r.map((function(e,r){return(0,m.jsxs)("li",{className:E,children:[(0,m.jsx)("h5",{className:F,onClick:function(e){return s(e)},children:e.short_name}),(0,m.jsx)("div",{dangerouslySetInnerHTML:{__html:e.description_html},className:L})]},r)}))}):(0,m.jsx)("div",{className:U,children:(0,m.jsx)(x.aN,{})})},D=function(e){var r=e.subreddit,s=(0,i.useState)(null),n=(0,t.Z)(s,2),a=n[0],u=n[1];(0,i.useEffect)((0,c.i)({path:"/r/".concat(r,"/about/rules"),callback:function(e){u(e.rules.map((function(e){return{short_name:e.short_name,description_html:e.description_html}})))}}),[]);return(0,m.jsx)(B,{toggleRule:function(e){var r=e.currentTarget.nextElementSibling;r.style.maxHeight?r.style.maxHeight="":r.style.maxHeight=r.scrollHeight+"px"},rules:a})},K=function(e){var r=e.flair,s=e.description,t=e.subscribers,n=e.activeCount,a=(0,i.useContext)(V),c=a.subreddit,u=a.getDate,l=a.hasFlair;return(0,m.jsxs)("aside",{className:y,children:[(0,m.jsxs)("section",{className:C,children:[(0,m.jsx)("h3",{children:"About"}),(0,m.jsxs)("p",{className:R,children:[" ",s," "]}),(0,m.jsxs)("p",{children:["Subscribers: ",(0,m.jsx)("b",{children:t})]}),(0,m.jsxs)("p",{children:["Active users: ",(0,m.jsx)("b",{children:n})]}),(0,m.jsxs)("p",{children:["Created: ",(0,m.jsx)("b",{children:u()})]})]}),l()&&(0,m.jsx)("hr",{"data-separator":!0}),l()&&(0,m.jsxs)("div",{className:H,children:[(0,m.jsx)("p",{children:"My Flair:\xa0"}),(0,m.jsx)(x.aQ,{bgcolor:r.bgcolor,richtext:r.richtext,color:r.color})]}),(0,m.jsx)("hr",{"data-separator":!0}),(0,m.jsxs)("div",{className:A,children:[(0,m.jsx)("h3",{children:"Rules"}),(0,m.jsx)(D,{subreddit:c})]})]})},M=function(e){var r=e.data,s=(0,i.useState)("best"),n=(0,t.Z)(s,2),a=n[0],c=n[1];return r?(0,m.jsxs)("main",{children:[(0,m.jsx)(x.JL,{}),(0,m.jsx)(w,{banner:r.banner_background_color,icon:r.community_img||r.icon_img,title:r.title,subscribed:r.user_is_subscriber}),(0,m.jsxs)("section",{className:l,"data-container":!0,children:[(0,m.jsxs)("section",{className:o,children:[(0,m.jsx)("div",{className:d,children:(0,m.jsx)(x.Mj,{changeSort:function(e){return c(e)},sort:a})}),(0,m.jsx)(j,{sort:a})]}),(0,m.jsx)(K,{flair:{bgcolor:r.user_flair_background_color,color:r.user_flair_text_color,richtext:r.user_flair_richtext},description:r.public_description,subscribers:r.subscribers,activeCount:r.active_user_count})]})]}):(0,m.jsxs)("div",{children:[(0,m.jsx)(x.JL,{}),(0,m.jsx)("div",{className:u,children:(0,m.jsx)(x.aN,{})})]})},V=(0,i.createContext)(null),G=function(){var e=(0,c.G)(),r=(0,n.UO)().subreddit,s=(0,n.s0)();"undefined"===typeof r&&s("/",{replace:!0});var u=(0,i.useState)(),l=(0,t.Z)(u,2),o=l[0],d=l[1],_=(0,c.i)({path:"/r/".concat(r,"/about"),callback:function(e){d(a(e.data))}});(0,i.useEffect)(_,[e]);return(0,m.jsx)(V.Provider,{value:{subreddit:r,getDate:function(){if(null===o||void 0===o||!o.created)return"";var e=new Date(1e3*o.created);return"".concat(e.getDate(),".").concat(e.getMonth()+1,".").concat(e.getFullYear())},hasFlair:function(){return!(null===o||void 0===o||!o.user_flair_background_color)||!(null===o||void 0===o||!o.user_flair_text_color)||0!==(null===o||void 0===o?void 0:o.user_flair_richtext.length)}},children:(0,m.jsx)(M,{data:o})})}}}]);
//# sourceMappingURL=135.fcf25bd2.chunk.js.map