"use strict";(self.webpackChunkyoomer=self.webpackChunkyoomer||[]).push([[20],{9020:function(e,r,t){t.r(r),t.d(r,{default:function(){return K}});var s=t(885),i=t(2791),n=t(6871),a=function(e){return{icon_img:e.icon_img,community_img:e.community_img,active_user_count:e.active_user_count,subscribers:e.subscribers,title:e.title,public_description:e.public_description,description_html:e.description_html,user_flair_richtext:e.user_flair_richtext,user_flair_background_color:e.user_flair_background_color,user_flair_text_color:e.user_flair_text_color,banner_background_image:e.banner_background_image,banner_background_color:e.banner_background_color,created:e.created,over18:e.over18,user_is_subscriber:e.user_is_subscriber}},c=t(4456),u="ShowSubreddit_loader__+Z0Bw",o="ShowSubreddit_contentGrid__KwB2M",l="ShowSubreddit_mainContent__pw0gl",d="ShowSubreddit_sortbar__vncHy",_=t(2982),b="SubredditFeed_postWrapper__ItOAu",h=t(3347),x=t(2711),f=t(184),m=function(e){var r=e.sort,t=(0,i.useContext)(B).subreddit,n=(0,c.G)(),a=(0,i.useState)([]),u=(0,s.Z)(a,2),o=u[0],l=u[1],d=(0,i.useRef)(""),m=(0,c.i)({path:"/r/".concat(t,"/").concat(r),callback:function(e,r){var t=e.data;t.after!==d.current&&(d.current=t.after,l((function(e){var s=t.children.map((function(e){return(0,x.UE)(e.data)}));return r?(0,_.Z)(s):[].concat((0,_.Z)(e),(0,_.Z)(s))})))},afterRef:d});return(0,i.useEffect)((function(){return m(!0)}),[n,r]),o.length?(0,f.jsxs)("section",{children:[o&&o.map((function(e,r){return(0,f.jsx)("div",{className:b,children:(0,f.jsx)(x.SO,{data:e},r)})})),o&&n&&(0,f.jsx)(h.Qj,{onObserve:function(){return m(!1)},logMessage:"in subreddit feed"})]}):(0,f.jsx)(h.aN,{})},j="SubredditHeader_banner__ze+Sd",p="SubredditHeader_header__QLivL",g="SubredditHeader_headerInfo__RUFSQ",v="SubredditHeader_subCreds__KoyiN",S="Subscription_subBtn__7pDvx",N=function(e){var r=e.isSubbed,t=e.subreddit,n=(0,i.useState)(r),a=(0,s.Z)(n,2),u=a[0],o=a[1],l=(0,c.i)({path:"/api/subscribe",callback:function(){return o((function(e){return!e}))},body:new URLSearchParams("action=".concat(u?"unsub":"sub","&sr_name=").concat(t))});return(0,f.jsx)("button",{onClick:l,className:S,children:u?"Unsubscribe":"Subscribe"})},k=function(e){var r=e.banner,t=e.icon,s=e.title,n=e.subscribed,a=(0,i.useContext)(B).subreddit;return(0,f.jsxs)("header",{className:p,children:[r&&(0,f.jsx)("img",{src:r,alt:"Banner",className:j}),(0,f.jsxs)("div",{"data-container":!0,className:g,"data-offset":r?"true":"false",children:[(0,f.jsxs)("div",{className:v,children:[t?(0,f.jsx)("img",{src:t,alt:""}):(0,f.jsx)("div",{"data-placeholder":!0}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h2",{title:s,children:s}),(0,f.jsxs)("p",{children:["r/",a]})]})]}),(0,f.jsx)(N,{isSubbed:n,subreddit:a})]})]})},w="SubredditAside_sidebar__s9x8H",y="SubredditAside_aboutSection__m8Fcf",C="SubredditAside_description__kK0uK",H="SubredditAside_flair__8ElVV",R="SubredditAside_rulesWrapper__GFaEc",A="ShowRules_rules__NiEA1",Z="ShowRules_listItem__lfiVB",E="ShowRules_accordion__EZKUN",F="ShowRules_panel__YYA3n",D=function(e){var r=e.rules,t=e.toggleRule;return r?(0,f.jsx)("ul",{className:A,children:r.map((function(e,r){return(0,f.jsxs)("li",{className:Z,children:[(0,f.jsx)("h5",{className:E,onClick:function(e){return t(e)},children:e.short_name}),(0,f.jsx)("div",{dangerouslySetInnerHTML:{__html:e.description_html},className:F})]},r)}))}):(0,f.jsx)(h.aN,{})},L=function(e){var r=e.subreddit,t=(0,i.useState)(null),n=(0,s.Z)(t,2),a=n[0],u=n[1];(0,i.useEffect)((0,c.i)({path:"/r/".concat(r,"/about/rules"),callback:function(e){u(e.rules.map((function(e){return{short_name:e.short_name,description_html:e.description_html}})))}}),[]);return(0,f.jsx)(D,{toggleRule:function(e){var r=e.currentTarget.nextElementSibling;r.style.maxHeight?r.style.maxHeight="":r.style.maxHeight=r.scrollHeight+"px"},rules:a})},M=function(e){var r=e.flair,t=e.descprition,s=e.subscribers,n=e.activeCount,a=(0,i.useContext)(B),c=a.subreddit,u=a.getDate,o=a.hasFlair;return(0,f.jsxs)("aside",{className:w,children:[(0,f.jsxs)("section",{className:y,children:[(0,f.jsx)("h3",{children:"About"}),(0,f.jsxs)("p",{className:C,children:[" ",t," "]}),(0,f.jsxs)("p",{children:["Subscribers: ",(0,f.jsx)("b",{children:s})]}),(0,f.jsxs)("p",{children:["Active users: ",(0,f.jsx)("b",{children:n})]}),(0,f.jsxs)("p",{children:["Created: ",(0,f.jsx)("b",{children:u()})]})]}),o()&&(0,f.jsx)("hr",{"data-separator":!0}),o()&&(0,f.jsxs)("div",{className:H,children:[(0,f.jsx)("p",{children:"My Flair:\xa0"}),(0,f.jsx)(h.aQ,{bgcolor:r.bgcolor,richtext:r.richtext,color:r.color})]}),(0,f.jsx)("hr",{"data-separator":!0}),(0,f.jsxs)("div",{className:R,children:[(0,f.jsx)("h3",{children:"Rules"}),(0,f.jsx)(L,{subreddit:c})]})]})},U=function(e){var r=e.data,t=(0,i.useState)("best"),n=(0,s.Z)(t,2),a=n[0],c=n[1],_=(0,i.useContext)(B);_.subreddit,_.getDate,_.hasFlair;return r?(0,f.jsxs)("main",{children:[(0,f.jsx)(h.JL,{}),(0,f.jsx)(k,{banner:r.banner_background_image,icon:r.community_img||r.icon_img,title:r.title,subscribed:r.user_is_subscriber}),(0,f.jsxs)("section",{className:o,"data-container":!0,children:[(0,f.jsxs)("section",{className:l,children:[(0,f.jsx)("div",{className:d,children:(0,f.jsx)(h.Mj,{changeSort:function(e){return c(e)},sort:a})}),(0,f.jsx)(m,{sort:a})]}),(0,f.jsx)(M,{flair:{bgcolor:r.user_flair_background_color,color:r.user_flair_text_color,richtext:r.user_flair_richtext},descprition:r.public_description,subscribers:r.subscribers,activeCount:r.active_user_count})]})]}):(0,f.jsxs)("div",{children:[(0,f.jsx)(h.JL,{}),(0,f.jsx)("div",{className:u,children:(0,f.jsx)(h.aN,{})})]})},B=(0,i.createContext)(null),K=function(){var e=(0,c.G)(),r=(0,n.UO)().subreddit,t=(0,n.s0)();"undefined"===typeof r&&t("/",{replace:!0});var u=(0,i.useState)(),o=(0,s.Z)(u,2),l=o[0],d=o[1],_=(0,c.i)({path:"/r/".concat(r,"/about"),callback:function(e){d(a(e.data))}});(0,i.useEffect)(_,[e]);return(0,f.jsx)(B.Provider,{value:{subreddit:r,getDate:function(){var e=new Date(1e3*l.created);return"".concat(e.getDate(),".").concat(e.getMonth()+1,".").concat(e.getFullYear())},hasFlair:function(){return!(null===l||void 0===l||!l.user_flair_background_color)||!(null===l||void 0===l||!l.user_flair_text_color)||0!==(null===l||void 0===l?void 0:l.user_flair_richtext.length)}},children:(0,f.jsx)(U,{data:l})})}}}]);
//# sourceMappingURL=20.e4b17406.chunk.js.map