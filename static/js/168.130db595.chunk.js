"use strict";(self.webpackChunkyoomer=self.webpackChunkyoomer||[]).push([[168],{6168:function(e,n,r){r.r(n),r.d(n,{default:function(){return Q}});var t=r(885),s=r(2791),c="FeedView_App__zgsy5",a="FeedView_content__QdOgv",i="FeedView_sortbar__n148y",o=r(2982),u=r(6030),l="CommonFeed_CommonFeed__P8jHF",d="CommonFeed_post__UuYoi",h=r(9110),m=r(4456),f=r(2711),_=r(184),x=function(e){var n=e.sort,r=(0,m.G)(),c=((0,u.v9)((function(e){return e.baseUrl})),(0,s.useState)([])),a=(0,t.Z)(c,2),i=a[0],x=a[1],j=(0,s.useRef)(""),b=(0,m.i)({path:"/".concat(n),callback:function(e,n){var r=e.data;r.after!==j.current&&(j.current=r.after,x((function(e){var t=r.children.map((function(e){return(0,f.UE)(e.data)}));return n?(0,o.Z)(t):[].concat((0,o.Z)(e),(0,o.Z)(t))})))},afterRef:j});return(0,s.useEffect)((function(){j.current=""}),[n]),(0,s.useEffect)((function(){return b(!0)}),[r,n]),i.length?(0,_.jsxs)("div",{className:l,children:[i&&i.map((function(e,n){return(0,_.jsx)("div",{className:d,children:(0,_.jsx)(f.SO,{data:e},n)})})),i&&r&&(0,_.jsx)(h.Qj,{onObserve:function(){return b(!1)},logMessage:"in common feed"})]}):(0,_.jsx)("div",{className:l,"data-center":!0,children:(0,_.jsx)(h.aN,{})})},j="SubredditsSidebar_SubredditsSidebar__1l-VI",b=function(e){return{name:e.display_name_prefixed,icon:e.icon_img||e.community_icon||null}},S="ShowCommunities_communities__Qy+c5",p="ShowCommunities_list__RrZon",v="ShowCommunities_heading__4y0Ky",w="ShowCommunities_subreddit__GJz1H",N="ShowCommunities_icon__5SO-x",g="ShowCommunities_btn__-Pls0",y=r(501),C=function(e){var n=e.fetchSubs,r=e.isAll,t=e.subreddits;return(0,_.jsxs)("div",{className:S,children:[(0,_.jsx)("h5",{className:v,children:"My Subreddits"}),(0,_.jsx)("ul",{className:p,children:t.map((function(e){return(0,_.jsxs)("li",{className:w,children:[e.icon?(0,_.jsx)("img",{src:e.icon,alt:"",width:25,height:25,className:N}):(0,_.jsx)("div",{className:N,"data-placeholder":!0}),(0,_.jsx)(y.rU,{to:e.name,title:e.name,children:e.name})]})}))}),!r&&(0,_.jsx)("button",{onClick:n,className:g,children:"load more"})]})},k=function(){var e=(0,m.G)(),n=(0,u.v9)((function(e){return e.baseUrl})),r=(0,s.useRef)(""),c=(0,s.useState)([]),a=(0,t.Z)(c,2),i=a[0],l=a[1],d=(0,s.useState)(!1),h=(0,t.Z)(d,2),f=h[0],x=h[1],j=function(e){var n=e.data;n.after!==r.current&&(null===n.after&&x(!0),r.current=n.after,l((function(e){return[].concat((0,o.Z)(e),(0,o.Z)(n.children.filter((function(e){return e.data.display_name_prefixed.startsWith("r/")})).map((function(e){return b(e.data)}))))})))},S=function(){if(e&&"error"!==e&&null!==r.current){var t=r?"&after=".concat(r.current):"";fetch("".concat(n,"/subreddits/mine/subscriber?raw_json=1").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then(j).catch((function(e){return console.log(e)}))}};return(0,s.useEffect)(S,[e]),(0,_.jsx)(C,{fetchSubs:S,isAll:f,subreddits:i})},Z="ShowSearch_container__Y32e+",F="ShowSearch_input__xfNqu",U="ShowSearch_btn__lc0Ra",R="ShowSearch_list__JZQ4-",E="ShowSearch_backdrop__WD0pt",A=function(e){var n=e.popupData,r=e.searchSubs,c=e.clear,a=(0,s.useState)(""),i=(0,t.Z)(a,2),o=i[0],u=i[1];return(0,_.jsxs)("div",{className:Z,children:[(0,_.jsx)("input",{type:"text",value:o,onChange:function(e){return u(e.target.value)},placeholder:"search subreddits",className:F}),(0,_.jsx)("button",{onClick:function(){return r(o)},className:U,children:(0,_.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[(0,_.jsx)("circle",{cx:"11",cy:"11",r:"8",stroke:"currentColor",fill:"none"}),(0,_.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65",stroke:"currentColor"})]})}),!(null===n||void 0===n||!n.length)&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:E,onClick:c}),(0,_.jsx)("ul",{className:R,children:n.map((function(e){return(0,_.jsx)("li",{children:(0,_.jsxs)(y.rU,{to:"/r/".concat(e.name),children:["/r/",e.name]})})}))})]})]})},G=function(){var e=(0,s.useState)([]),n=(0,t.Z)(e,2),r=n[0],c=n[1],a=function(e){var n=e.subreddits.sort((function(e,n){return e.subscriber_count-n.subscriber_count}));c(n)};return(0,_.jsx)(A,{searchSubs:function(e){(0,m.i)({path:"/api/search_subreddits",callback:a,body:new URLSearchParams("exact=false&include_over_18=true&query=".concat(e))})},popupData:r,clear:function(){return c([])}})},O=function(){return(0,_.jsxs)("aside",{className:j,children:[(0,_.jsx)(G,{}),(0,_.jsx)("hr",{}),(0,_.jsx)(k,{})]})},Q=function(){var e=(0,s.useState)("best"),n=(0,t.Z)(e,2),r=n[0],o=n[1];return(0,_.jsxs)("main",{className:c,children:[(0,_.jsx)(h.JL,{}),(0,_.jsxs)("section",{"data-container":!0,className:a,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{className:i,children:(0,_.jsx)(h.Mj,{changeSort:function(e){o(e)},sort:r})}),(0,_.jsx)(x,{sort:r})]}),(0,_.jsx)(O,{})]})]})}}}]);
//# sourceMappingURL=168.130db595.chunk.js.map