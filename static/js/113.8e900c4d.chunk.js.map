{"version":3,"file":"static/js/113.8e900c4d.chunk.js","mappings":"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","sources":["utils/trimSubreddit.ts","webpack://yoomer/./src/views/Subreddit/Subreddit.module.scss?a445","webpack://yoomer/./src/components/SubredditFeed/SubredditFeed.module.scss?3a67","components/SubredditFeed/SubredditFeed.tsx","webpack://yoomer/./src/components/Subscription/Subscription.module.scss?bdbe","components/Subscription/Subscription.tsx","webpack://yoomer/./src/components/Rules/Rules.module.scss?8971","components/Rules/Rules.tsx","views/Subreddit/Subreddit.tsx"],"sourcesContent":["import { ISubreddit } from \"./types\";\r\n\r\nconst trimSubreddit = (data: any): ISubreddit => {\r\n  return {\r\n    icon_img: data.icon_img,\r\n    community_img: data.community_img,\r\n    active_user_count: data.active_user_count,\r\n    subscribers: data.subscribers,\r\n    title: data.title,\r\n    public_description: data.public_description,\r\n    description_html: data.description_html,\r\n    user_flair_richtext: data.user_flair_richtext,\r\n    user_flair_background_color: data.user_flair_background_color,\r\n    user_flair_text_color: data.user_flair_text_color,\r\n    banner_background_image: data.banner_background_image,\r\n    banner_background_color: data.banner_background_color,\r\n    created: data.created,\r\n    over18: data.over18,\r\n    user_is_subscriber: data.user_is_subscriber\r\n  }\r\n}\r\n\r\nexport default trimSubreddit","// extracted by mini-css-extract-plugin\nexport default {\"loader\":\"Subreddit_loader__rKlqs\",\"banner\":\"Subreddit_banner__Kgcye\",\"header\":\"Subreddit_header__Iagaq\",\"headerInfo\":\"Subreddit_headerInfo__vSa0z\",\"subCreds\":\"Subreddit_subCreds__3eFi0\",\"contentGrid\":\"Subreddit_contentGrid__DncSN\",\"mainContent\":\"Subreddit_mainContent__Ra8Es\",\"sidebar\":\"Subreddit_sidebar__2TsNu\",\"description\":\"Subreddit_description__zL-bN\",\"sortbar\":\"Subreddit_sortbar__QDevC\",\"aboutSection\":\"Subreddit_aboutSection__6zTYH\",\"flair\":\"Subreddit_flair__J7zm-\",\"rulesWrapper\":\"Subreddit_rulesWrapper__uGgYi\"};","// extracted by mini-css-extract-plugin\nexport default {\"postWrapper\":\"SubredditFeed_postWrapper__NuyiD\"};","import React, { useEffect, useState, useRef } from 'react'\r\nimport useAccessToken from '../../hooks/useAccessToken'\r\nimport useFetch from '../../hooks/useFetch'\r\nimport { IPost, State, Sort } from '../../utils/types'\r\nimport trimPost from '../../utils/trimPost'\r\nimport classes from './SubredditFeed.module.scss'\r\n\r\nimport Post from '../Post/Post'\r\nimport Observer from '../Observer/Observer'\r\nimport Loader from '../Loader/Loader'\r\n\r\ninterface SubredditFeedProps {\r\n  subreddit: string,\r\n  sort: Sort\r\n}\r\n\r\nconst SubredditFeed: React.FC<SubredditFeedProps> = ({ subreddit, sort }) => {\r\n  const token = useAccessToken()\r\n\r\n  const [posts, setPosts] = useState<IPost[]>([])\r\n  const afterRef = useRef<string>('')\r\n\r\n  const acceptData = (res: any, shouldReset: boolean) => {\r\n    const data = res.data\r\n\r\n    if (data.after !== afterRef.current) {\r\n      afterRef.current = data.after\r\n\r\n      setPosts(prevPosts => {\r\n        const newPosts = data.children.map((item: any) => trimPost(item.data)) \r\n        return shouldReset\r\n          ? [ ...newPosts ]\r\n          : [ ...prevPosts, ...newPosts ]\r\n      })\r\n\r\n    }\r\n  }\r\n\r\n  const fetchPosts = useFetch({\r\n    path: `/r/${subreddit}/${sort}`,\r\n    callback: acceptData,\r\n    afterRef\r\n  })\r\n\r\n  useEffect(() => fetchPosts(true), [token, sort])\r\n\r\n  return posts.length\r\n    ? (\r\n      <section>\r\n        {posts && posts.map((post, i) => {\r\n          return <div className={classes.postWrapper}>\r\n            <Post key={i} data={post} />\r\n          </div>\r\n        })}\r\n        {posts && token && <Observer \r\n          onObserve={() => fetchPosts(false)}\r\n          logMessage=\"in subreddit feed\"\r\n        />}\r\n      </section>\r\n    )\r\n    : <Loader />\r\n}\r\n\r\nexport default SubredditFeed","// extracted by mini-css-extract-plugin\nexport default {\"subBtn\":\"Subscription_subBtn__fp9YV\"};","import React, { useState } from 'react'\r\nimport useFetch from '../../hooks/useFetch'\r\nimport classes from './Subscription.module.scss'\r\n\r\ninterface SubscriptionProps {\r\n  isSubbed: boolean,\r\n  subreddit: string\r\n}\r\n\r\nconst Subscription: React.FC<SubscriptionProps> = ({ isSubbed, subreddit }) => {\r\n  const [subbed, setSubbed] = useState(isSubbed)\r\n  const action = useFetch({\r\n    path: '/api/subscribe',\r\n    callback: () => setSubbed(prev => !prev),\r\n    body: new URLSearchParams(`action=${subbed ? 'unsub' : 'sub'}&sr_name=${subreddit}`)\r\n  })\r\n\r\n  return <button onClick={action} className={classes.subBtn}>{\r\n    subbed\r\n      ? 'Unsubscribe'\r\n      : 'Subscribe'\r\n  }</button>\r\n}\r\n\r\nexport default Subscription","// extracted by mini-css-extract-plugin\nexport default {\"rules\":\"Rules_rules__9yQQS\",\"listItem\":\"Rules_listItem__vGx1s\",\"accordion\":\"Rules_accordion__lr7r7\",\"panel\":\"Rules_panel__qI4WF\"};","import React, { useEffect, useRef, useState } from 'react'\r\nimport useFetch from '../../hooks/useFetch'\r\nimport classes from './Rules.module.scss'\r\n\r\nimport Loader from '../Loader/Loader'\r\n\r\ninterface RulesProps {\r\n  subreddit: string\r\n}\r\n\r\ninterface IRule {\r\n  short_name: string,\r\n  description_html: string\r\n}\r\n\r\nconst Rules: React.FC<RulesProps> = ({ subreddit }) => {\r\n  const [rules, setRules] = useState<IRule[] | null>()\r\n\r\n  const acceptData = (data: any) => {\r\n    //console.log(data.rules)\r\n    setRules(data.rules.map((rule: any) => ({\r\n      short_name: rule.short_name,\r\n      description_html: rule.description_html\r\n    })))\r\n  }\r\n\r\n  useEffect(useFetch({\r\n    path: `/r/${subreddit}/about/rules`,\r\n    callback: acceptData\r\n  }), [])\r\n\r\n  const toggleRule = (e: React.MouseEvent) => {\r\n    const panel = e.currentTarget.nextElementSibling as HTMLElement\r\n    if (panel.style.maxHeight) {\r\n      panel.style.maxHeight = ''\r\n    } else {\r\n      panel.style.maxHeight = panel.scrollHeight + \"px\"\r\n    }\r\n  }\r\n\r\n  return rules\r\n    ? (\r\n      <ul className={classes.rules}>{\r\n        rules.map((rule: IRule, i) => {\r\n          return (\r\n            <li className={classes.listItem} key={i}>\r\n              <h5 className={classes.accordion} onClick={e => toggleRule(e)}>{rule.short_name}</h5>\r\n              <div \r\n                dangerouslySetInnerHTML={{__html: rule.description_html}}\r\n                className={classes.panel}\r\n              />\r\n            </li>\r\n          )\r\n        })\r\n      }</ul>\r\n    )\r\n    : <Loader />\r\n}\r\n\r\nexport default Rules","import React, { useEffect, useState } from \"react\"\r\nimport { useParams } from \"react-router-dom\"\r\nimport useAccessToken from \"../../hooks/useAccessToken\"\r\nimport useFetch from \"../../hooks/useFetch\"\r\nimport { State, ISubreddit, Sort } from \"../../utils/types\"\r\nimport trimSubreddit from \"../../utils/trimSubreddit\"\r\nimport classes from './Subreddit.module.scss'\r\n\r\nimport SubredditFeed from \"../../components/SubredditFeed/SubredditFeed\"\r\nimport SortBar from \"../../components/SortBar/SortBar\"\r\nimport Loader from \"../../components/Loader/Loader\"\r\nimport Subscription from \"../../components/Subscription/Subscription\"\r\nimport Flair from \"../../components/Flair/Flair\"\r\nimport Rules from \"../../components/Rules/Rules\"\r\nimport Nav from '../../components/Nav/Nav'\r\n\r\nconst Subreddit: React.FC = () => {\r\n  const token = useAccessToken()\r\n  const { subreddit } = useParams()\r\n\r\n  const [subData, setSubData] = useState<ISubreddit>()\r\n  const [sort, setSort] = useState<Sort>('best')\r\n\r\n  const acceptData = (data: any) => {\r\n    setSubData(trimSubreddit(data.data))\r\n  }\r\n\r\n  const getDate = () => {\r\n    const date = new Date(subData!.created * 1000)\r\n    return `${date.getDate()}.${date.getMonth()+1}.${date.getFullYear()}`\r\n  }\r\n\r\n  const fetchSubreddit = useFetch({\r\n    path: `/r/${subreddit}/about`,\r\n    callback: acceptData\r\n  })\r\n\r\n  useEffect(fetchSubreddit, [token])\r\n\r\n  const hasFlair = () => \r\n    !!subData?.user_flair_background_color \r\n    || !!subData?.user_flair_text_color \r\n    || subData?.user_flair_richtext.length !== 0\r\n  //console.log(subData, hasFlair())\r\n\r\n  return subData\r\n    ? (\r\n      <main>\r\n        <Nav />\r\n        <header className={classes.header}>\r\n          {subData.banner_background_image && (\r\n            <img src={subData.banner_background_image} alt=\"Banner\" className={classes.banner} />\r\n          )}\r\n          <div \r\n            data-container \r\n            className={classes.headerInfo} \r\n            data-offset={subData.banner_background_image ? 'true' : 'false'}\r\n          >\r\n            <div className={classes.subCreds}>\r\n              {(subData.community_img || subData.icon_img) \r\n                ? <img src={subData.community_img || subData.icon_img} alt=\"\" />\r\n                : <div data-placeholder />}\r\n              <div> \r\n                <h2 title={subData.title}>{subData.title}</h2>\r\n                <p>r/{subreddit}</p>\r\n              </div>\r\n            </div>\r\n            <Subscription isSubbed={subData.user_is_subscriber} subreddit={subreddit!} />\r\n          </div>\r\n        </header>\r\n\r\n        <section className={classes.contentGrid} data-container>\r\n          <section className={classes.mainContent}>\r\n            <div className={classes.sortbar}>\r\n              <SortBar changeSort={(val: Sort) => setSort(val)} sort={sort} />\r\n            </div>\r\n            <SubredditFeed subreddit={subreddit!} sort={sort} />\r\n          </section>\r\n\r\n          <aside className={classes.sidebar}>\r\n            <section className={classes.aboutSection}>\r\n              <h3>About</h3>\r\n              <p className={classes.description}>{subData.public_description}</p>\r\n              <p>Subscribers: <b>{subData.subscribers}</b></p>\r\n              <p>Active users: <b>{subData.active_user_count}</b></p>\r\n              <p>Created: <b>{getDate()}</b></p>\r\n            </section>\r\n\r\n            {hasFlair() && (\r\n                <hr data-separator />\r\n              )}\r\n\r\n            {hasFlair() && (\r\n              <div className={classes.flair}>\r\n                <p>My Flair:&nbsp;</p>\r\n                <Flair \r\n                  bgcolor={subData.user_flair_background_color}\r\n                  richtext={subData.user_flair_richtext}\r\n                  color={subData.user_flair_text_color}\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            <hr data-separator />\r\n\r\n            <div className={classes.rulesWrapper}>\r\n              <h3>Rules</h3>\r\n              <Rules subreddit={subreddit!} />\r\n            </div>\r\n          </aside>\r\n        </section>\r\n      </main>\r\n    )\r\n    : <div>\r\n      <Nav />\r\n      <div className={classes.loader}>\r\n        <Loader />\r\n      </div>\r\n    </div>\r\n}\r\n\r\nexport default Subreddit"],"names":["data","icon_img","community_img","active_user_count","subscribers","title","public_description","description_html","user_flair_richtext","user_flair_background_color","user_flair_text_color","banner_background_image","banner_background_color","created","over18","user_is_subscriber","subreddit","sort","token","useAccessToken","useState","posts","setPosts","afterRef","useRef","fetchPosts","useFetch","path","callback","res","shouldReset","after","current","prevPosts","newPosts","children","map","item","trimPost","useEffect","length","post","i","className","classes","Post","Observer","onObserve","logMessage","Loader","isSubbed","subbed","setSubbed","action","prev","body","URLSearchParams","onClick","rules","setRules","rule","short_name","e","panel","currentTarget","nextElementSibling","style","maxHeight","scrollHeight","toggleRule","dangerouslySetInnerHTML","__html","useParams","subData","setSubData","setSort","fetchSubreddit","trimSubreddit","hasFlair","Nav","src","alt","SortBar","changeSort","val","date","Date","getDate","getMonth","getFullYear","Flair","bgcolor","richtext","color"],"sourceRoot":""}